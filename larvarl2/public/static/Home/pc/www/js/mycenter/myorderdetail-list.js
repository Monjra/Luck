$(function(){function i(){LT.scroll({oViweContainer:$(".J_scroll"),oPanelContainer:$("#scroll"),oScrollContainer:$("div.J_scrollWrap"),oScrollBtn:$("div.J_scrollBtn"),height:310,direction:"y"})}function l(i,l){return""==i||i.length<=l?i:i.substring(0,l)+"..."}$("a[name='showList']").click(function(){var a=$(this).attr("data-designid");LT.Ajax({type:"post",dataType:"json",cache:!1,async:!1,data:{designId:a},url:window.ControllerSite+"/MyCenter/getDesignDetail",success:function(a){if(null!=a.data){for(var t='<div class="J_scroll pd20 relative overflow"><div id="scroll"><p class="matLayP">材料清单</p><div class="clearfix matLayUl">',s=a.data.designMaterialDetails,e=0;e<s.length;e++)t+='<ul><li class="imgLi"><img width="98px" height="98px" title="'+s[e].material_name+'" src="'+s[e].material_image_url+'"></li><li>'+l(s[e].material_name,8)+"</li></ul>";t+="</div>";var r=a.data.designPeiJians;if(null!=r&&0!=r.length){t+='<p class="matLayP">配件清单</p><div class="clearfix matLayUl">';for(var e in r)t+='<ul><li class="imgLi"><img width="98px" height="98px" src="'+r[e].model_image_url+'"></li><li>'+r[e].model_name+"</li></ul>";t+="</div>"}for(var c=!1,n=!1,d=strMaps="",o=a.data.designSignmaps,e=0;e<o.length;e++)1==o[e].pic_type&&(n=!0,strMaps+='<ul><li class="imgLi"><img width="98px" height="98px" src="'+o[e].pic_url+'"></li><li>'+o[e].pic_word+"</li></ul>"),2==o[e].pic_type&&(c=!0,d+='<ul><li class="imgLi"><img width="98px" height="98px" src="'+o[e].pic_url+'" onerror="javascript:this.src=\'http://static3.biyao.com/pc/www/img/avatar/head_90.png\'"></li><li>'+o[e].pic_word+"</li></ul>");n&&(t+='<p class="matLayP">个性图案清单</p><div class="clearfix matLayUl">'+strMaps+"</div>"),c&&(t+='<p class="matLayP">个性签名清单</p><div class="clearfix matLayUl">'+d+"</div>");var p=a.data.DesignAttachs;if(p){t+='<p class="matLayP">辅助功能清单</p><div class="clearfix matLayUl">';for(var e in p)t+="<ul><li>"+p[e].type_name+"</li><li>"+p[e].name+"</li><li>"+p[e].adddesc+"</li><li>"+p[e].price+"</li></ul>";t+="</div>"}var m='<div class="scr_com h400 J_scrollWrap"><div class="scr_monsemove J_scrollBtn"></div></div>';t+="</div></div>"+m,$(this).dialogFn({id:"J_list_popup_box",title:"清单",type:"alert",height:"360px",width:"640px",className:"btnBg4 w120 relative posR1",btnText:["取消"],showAfter:function(){i()},content:t})}else LT.alertSmall("未能获取材料清单。")},error:function(){}})})});