!function(a){var s=function(a,s,e,t){var i=this;i.that=a,i.usePng=!1,i.label=e,i.delay=t,i.maskTimeout="_mask_timeout",i.cFrameWidth=40,i.cSpeed=8,i.cTotalFrames=8,i.cFrameWidth=40,i.cIndex=0,i.cXpos=0,i.SECONDS_BETWEEN_FRAMES=0,i.maskPngTimeout=!1,i.init=function(){void 0!==s&&1==s&&(i.usePng=!0),i.bindEvent()},i.init()};s.prototype={constructor:s,bindEvent:function(){var a=this;a.that.bind("unMask",function(){a.doUnMask()}),a.that.bind("isMasked",function(){return a.isMasked()})},isMasked:function(){var a=this;return a.that.hasClass("masked")},mask:function(){var a=this;void 0!==a.delay&&a.delay>0?a.that.data(a.maskTimeout,setTimeout(function(){a.doMask()})):a.doMask()},maskPngAnimation:function(a){var s=this;s.cXpos+=s.cFrameWidth,s.cIndex+=1,s.cIndex>=s.cTotalFrames&&(s.cXpos=0,s.cIndex=0),a.css("background-position",-s.cXpos+"px 0"),s.maskPngTimeout=setTimeout(function(){s.maskPngAnimation(a)},1e3*s.SECONDS_BETWEEN_FRAMES)},doMask:function(){var s=this,e=s.that,t=s.label;void 0!==e.data(s.maskTimeout)&&(clearTimeout(e.data(s.maskTimeout)),e.removeData(s.maskTimeout)),s.isMasked()&&s.doUnMask(),"static"==e.css("position")&&e.addClass("masked-relative"),e.addClass("masked");var i=a('<div class="loadmask"></div>');if(navigator.userAgent.toLowerCase().indexOf("msie")>-1&&(i.height(e.height()+parseInt(e.css("padding-top"))+parseInt(e.css("padding-bottom"))),i.width(e.width()+parseInt(e.css("padding-left"))+parseInt(e.css("padding-right")))),navigator.userAgent.toLowerCase().indexOf("msie 6")>-1&&e.find("select").addClass("masked-hidden"),e.append(i),1==s.usePng){var n=a('<div class="loadmask-msg-usepng" style="display:none;"></div>');if(e.append(n),void 0!=t){var d=a('<div class="loadmask-msg">'+t+"</div>");e.append(d)}s.FPS=Math.round(100/s.cSpeed),s.SECONDS_BETWEEN_FRAMES=1/s.FPS,s.maskPngAnimation(n),n.show()}else if(void 0!==t){var o=a('<div class="loadmask-msg" style="display:none;"></div>');t instanceof jQuery?o=t.clone():o.append("<div>"+t+"</div>"),e.append(o),o.show()}},doUnMask:function(){var a=this,s=a.that;void 0!==s.data(a.maskTimeout)&&(clearTimeout(s.data(a.maskTimeout)),s.removeData(a.maskTimeout)),a.usePng&&clearTimeout(a.maskPngTimeout),s.find(".loadmask-msg,.loadmask,.loadmask-msg-usepng").remove(),s.removeClass("masked"),s.removeClass("masked-relative"),s.find("select").removeClass("masked-hidden")}},a.fn.mask=function(e,t,i){return this.each(function(){var n=a(this),d=n.data("_mask");d?(d.usePng=e,d.label=t,d.delay=i):n.data("_mask",d=new s(n,e,t,i)),d.mask()})},a.extend(a.fn,{unmask:function(){return this.each(function(){a(this).trigger("unMask")})},isMasked:function(){return a(this).trigger("isMasked")}})}(jQuery);